# 📘 페이퍼 트레이딩 가이드

## 🎯 페이퍼 트레이딩이란?

**페이퍼 트레이딩**(Paper Trading)은 실제 돈을 사용하지 않고 **시뮬레이션으로 거래**하는 것입니다.

**목적:**
- ✅ 전략의 실시간 성능 검증
- ✅ 실제 시장 조건에서 테스트
- ✅ 손실 없이 경험 축적
- ✅ 심리적 준비

---

## 🚀 빠른 시작

### 1단계: 설정 확인

```bash
# .env 파일이 생성되어 있는지 확인
ls -la .env

# 내용 확인 (DRY_RUN=true인지 확인)
cat .env | grep DRY_RUN
```

**중요:** `DRY_RUN=true`이어야 합니다!

### 2단계: 페이퍼 트레이딩 시작

```bash
# 실행
python run_paper_trading.py
```

**예상 출력:**
```
================================================================================
🚀 페이퍼 트레이딩 시작
================================================================================
⚠️  실제 거래가 아닙니다. 시뮬레이션 모드입니다.
================================================================================

📊 설정:
  마켓:          KRW-BTC
  전략:          weighted_combined
  초기 잔고:     1,000,000원
  폴링 간격:     60초
  캔들 개수:     200개 (60분봉)
  드라이런:      True

✅ 엔진 초기화 완료
✅ 60초마다 시장 데이터를 체크합니다

종료하려면 Ctrl+C를 누르세요
```

### 3단계: 실시간 모니터링

**터미널 1 (페이퍼 트레이딩 실행):**
```bash
python run_paper_trading.py
```

**터미널 2 (성과 모니터링):**
```bash
# 전체 성과 보기
python monitor_performance.py

# 오늘 거래만 보기
python monitor_performance.py --daily
```

### 4단계: 종료

페이퍼 트레이딩 종료: `Ctrl + C`

---

## 📊 모니터링 대시보드

### 전체 성과 확인

```bash
python monitor_performance.py
```

**출력 예시:**
```
================================================================================
📊 페이퍼 트레이딩 성과 대시보드
================================================================================

📅 기간:
  시작: 2025-11-09 13:00:00
  종료: 2025-11-09 18:30:00

💰 성과 지표:
  총 거래 횟수:         8회
  청산 횟수:            4회
  승:                   3회
  패:                   1회
  승률:              75.0%
  평균 수익률:       +2.5%
  총 수익률:         +10.0%
  Sharpe Ratio:       2.15
  최대 낙폭:          -3.2%

💵 잔고 (추정):
  초기 잔고:     1,000,000원
  현재 잔고:     1,100,000원
  손익:           +100,000원

📝 최근 거래 (최대 5개):
────────────────────────────────────────────────────────────────────────────────
1. [2025-11-09 18:30:00] ✅ 매도: @ 114,200,000원 (PnL: +3.5%)
2. [2025-11-09 17:15:00] 📈 매수: 50,000원 @ 110,500,000원
3. [2025-11-09 15:45:00] ✅ 매도: @ 112,800,000원 (PnL: +2.1%)
4. [2025-11-09 14:20:00] 📈 매수: 50,000원 @ 110,500,000원
5. [2025-11-09 13:00:00] 📈 매수: 50,000원 @ 109,800,000원

================================================================================
📈 평가:
✅ 양호: 플러스 수익 유지
✅ Sharpe Ratio 우수 (>1.5)
✅ 승률 우수 (>50%)
================================================================================
```

---

## ⚙️ 설정 변경

### .env 파일 수정

```bash
nano .env
```

### 주요 설정 항목

#### 1. 전략 선택
```env
# 가중 복합 전략 (권장)
STRATEGY_NAME=weighted_combined

# 또는 MA Crossover만
# STRATEGY_NAME=ma_crossover
```

#### 2. 가중치 조정
```env
# RSI 비중 높이기 (보수적)
WEIGHTED_RSI_WEIGHT=0.5
WEIGHTED_MA_WEIGHT=0.5

# MA 비중 높이기 (공격적)
WEIGHTED_RSI_WEIGHT=0.2
WEIGHTED_MA_WEIGHT=0.8
```

#### 3. 리스크 관리
```env
# 보수적 설정
RISK_STOP_LOSS_PCT=-3.0
RISK_TAKE_PROFIT_PCT=5.0

# 공격적 설정
RISK_STOP_LOSS_PCT=-7.0
RISK_TAKE_PROFIT_PCT=15.0
```

#### 4. 폴링 간격
```env
# 1분마다 체크 (더 빠른 반응)
POLL_INTERVAL=60

# 5분마다 체크 (덜 빈번)
POLL_INTERVAL=300
```

#### 5. 마켓 변경
```env
# 비트코인
UPBIT_MARKET=KRW-BTC

# 이더리움
UPBIT_MARKET=KRW-ETH

# 리플
UPBIT_MARKET=KRW-XRP
```

---

## 📈 평가 기준

### 1주일 후

**최소 기준 (계속):**
- ✅ 총 수익률 > 0%
- ✅ Sharpe Ratio > 0.5
- ✅ 승률 > 35%
- ✅ 최대 낙폭 < -15%

**목표 기준 (확신):**
- ✅ 총 수익률 > +5%
- ✅ Sharpe Ratio > 1.0
- ✅ 승률 > 45%
- ✅ 최대 낙폭 < -10%

### 1개월 후

**최소 기준 (소액 실거래 고려):**
- ✅ 총 수익률 > +5%
- ✅ Sharpe Ratio > 1.0
- ✅ 승률 > 40%
- ✅ 최대 낙폭 < -12%
- ✅ 월간 표준편차 < 10%

**목표 기준 (투자금 증액 고려):**
- ✅ 총 수익률 > +15%
- ✅ Sharpe Ratio > 1.5
- ✅ 승률 > 50%
- ✅ 최대 낙폭 < -8%
- ✅ 월간 표준편차 < 5%

### 3개월 후 (실거래 결정)

**실거래 GO:**
- ✅ 누적 수익률 > +15%
- ✅ Sharpe Ratio > 1.5
- ✅ 승률 > 45%
- ✅ 최대 낙폭 < -10%
- ✅ 매월 플러스 수익

**재검토 필요:**
- ⚠️ 누적 수익률 0~15%
- ⚠️ Sharpe Ratio 0.5~1.5
- ⚠️ 승률 35~45%
- ⚠️ 1개월 이상 마이너스

**실거래 NO (전략 폐기):**
- ❌ 누적 수익률 < 0%
- ❌ Sharpe Ratio < 0.5
- ❌ 승률 < 35%
- ❌ 최대 낙폭 > -20%

---

## 🚨 주의사항

### 1. 페이퍼 vs 실거래 차이

**페이퍼 트레이딩에서 없는 것:**
- 실제 슬리피지 (가격 변동)
- 주문 체결 지연
- 감정적 압박
- 거래소 장애

**예상 차이:**
```
페이퍼 트레이딩 수익률: +15%
→ 실거래 예상: +10% (70%)
```

### 2. 과최적화 위험

**증상:**
- 백테스트: +50%
- 페이퍼 트레이딩: +10%
- 실거래: -5%

**대응:**
- 파라미터 재조정
- 더 보수적 설정
- 3개월 이상 검증

### 3. 시장 조건 변화

**2025년 11월 상승장:**
- 페이퍼 트레이딩: +20%

**2025년 12월 하락장:**
- 실거래: -10%

**대응:**
- 다양한 시장 조건 테스트
- Walk-forward 검증
- 손절 철저히 준수

---

## 🔧 문제 해결

### 문제 1: API 403 에러

**증상:**
```
❌ API 오류: 403 - Access denied
```

**원인:**
- 샌드박스 환경에서 업비트 API 차단
- IP 제한

**해결:**
- 로컬 PC에서 실행
- VPN 사용 고려

### 문제 2: 거래가 하나도 안 일어남

**증상:**
```
총 거래 횟수: 0회
```

**원인:**
- ATR Threshold가 너무 높음
- 시장 변동성 낮음
- 전략 파라미터 너무 보수적

**해결:**
```env
# ATR Threshold 낮추기
MA_ATR_THRESHOLD=0.01  # 0.02에서 낮춤

# 가중치 조정
WEIGHTED_RSI_WEIGHT=0.5
WEIGHTED_MA_WEIGHT=0.5
```

### 문제 3: 연속 손실

**증상:**
```
승률: 25%
총 수익률: -8%
```

**원인:**
- 시장 조건이 전략과 맞지 않음
- 과최적화
- 손절이 너무 빠름

**해결:**
1. 즉시 중단
2. 파라미터 재검토
3. 실데이터 재검증
4. 다른 마켓 테스트

---

## 📅 체크리스트

### 일일 (매일)
- [ ] 페이퍼 트레이딩 실행 중인지 확인
- [ ] `monitor_performance.py` 실행
- [ ] 오늘 수익률 확인
- [ ] 로그 파일 확인

### 주간 (매주)
- [ ] 누적 수익률 계산
- [ ] Sharpe Ratio 확인
- [ ] 승률 분석
- [ ] 거래 내역 리뷰
- [ ] 파라미터 조정 필요성 검토

### 월간 (매월)
- [ ] 전체 성과 평가
- [ ] 백테스트 결과와 비교
- [ ] 실거래 진행 여부 결정
- [ ] 리포트 작성

---

## 🎓 다음 단계

### 1주일 후
```
✅ 페이퍼 트레이딩 안정적
✅ 수익률 > 0%
→ 계속 진행
```

### 1개월 후
```
✅ 누적 수익률 > +10%
✅ Sharpe > 1.0
→ 소액 실거래 준비
```

### 3개월 후
```
✅ 안정적 수익
✅ 모든 지표 양호
→ 소액 실거래 시작 (10만원)
```

---

## 💡 팁

### 1. 인내심
```
첫 주: 거래 0회 → 정상입니다
둘째 주: 거래 2회 → 정상입니다
셋째 주: 수익 -2% → 정상입니다

3개월: 누적 +12% → 성공!
```

### 2. 기록
```bash
# 매일 스크린샷 저장
python monitor_performance.py > logs/daily_$(date +%Y%m%d).txt
```

### 3. 다양한 테스트
```bash
# BTC 테스트
UPBIT_MARKET=KRW-BTC python run_paper_trading.py

# ETH 테스트
UPBIT_MARKET=KRW-ETH python run_paper_trading.py
```

---

## ✅ 최종 목표

**3개월 페이퍼 트레이딩 후:**
```
누적 수익률: +15~25%
Sharpe Ratio: 1.5~2.5
승률: 45~55%
최대 낙폭: -8~-12%

→ 소액 실거래 시작 (10만원)
→ 성공 시 점진적 증액
→ 1년 후 안정적 운영
```

**화이팅! 🚀**
